(this["webpackJsonpmoviesearch-app"]=this["webpackJsonpmoviesearch-app"]||[]).push([[0],{38:function(e,t,a){e.exports=a(67)},43:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(35),o=a.n(r),l=(a(43),a(12)),i=a(1),s=a(13),u=a(14),m=a(17),v=a(16),d=a(18),f=a(2),b=a(10),p=a(20),E=a.n(p),h=Object(n.createContext)(),g=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).putData=function(e,t){if(console.log(e),console.log(t),"all"===t){var a=e.Search.map((function(e){return e.isFav?e:Object(f.a)(Object(f.a)({},e),{},{isFav:!1})}));console.log(a),n.setState(Object(f.a)(Object(f.a)(Object(f.a)({},n.state),e),{},{search:a}))}else{var c=e.Search.filter((function(e){return e.Type===t})).map((function(e){return e.isFav?e:Object(f.a)(Object(f.a)({},e),{},{isFav:!1})}));console.log(c),n.setState(Object(f.a)(Object(f.a)(Object(f.a)({},n.state),e),{},{search:c}))}},n.setFavourite=function(e){var t=null,a=null,c=n.state.search.map((function(n){return n.imdbID==e?(console.log("yes i am"),t=!n.isFav,a=Object(f.a)(Object(f.a)({},n),{},{isFav:!n.isFav}),console.log(a),Object(f.a)({},a)):n}));if(console.log("i am at 53"),t){console.log("i am true");var r=[].concat(Object(d.a)(n.state.favourites),[a]);console.log("fav",r),n.setState((function(){return localStorage.setItem("favourites",JSON.stringify(r)),Object(f.a)(Object(f.a)({},n.state),{},{favourites:[].concat(Object(d.a)(n.state.favourites),[a]),new:"hello"})}))}else{console.log("i am false");var o=n.state.favourites.filter((function(t){return t.imdbID!=e}));n.setState((function(){return localStorage.setItem("favourites",JSON.stringify(o)),Object(f.a)(Object(f.a)({},n.state),{},{favourites:o})}))}console.log("i am new data",c),n.setState({search:Object(d.a)(c)})},n.state={favourites:[],search:[]},n.putData=n.putData.bind(Object(b.a)(n)),n.setFavourite=n.setFavourite.bind(Object(b.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setState({favourites:JSON.parse(localStorage.getItem("favourites"))||[]})}},{key:"render",value:function(){var e=Object(f.a)(Object(f.a)({},this.state),{},{putData:this.putData,setFavourite:this.setFavourite});return console.log(e),c.a.createElement(h.Provider,{value:Object(f.a)({},e)},this.props.children)}}]),a}(n.Component);var O=function(){var e=Object(n.useContext)(h),t=e.search,a=e.setFavourite,r=e.favourites,o=e.Response;console.log(t),console.log(r);var l=t.map((function(e){return c.a.createElement("div",{className:"movie-card-layout",key:e.imdbID},c.a.createElement("div",{className:"movie-card"},c.a.createElement("div",{className:"favourite",id:e.imdbID},!e.isFav&&c.a.createElement("img",{src:"001-star-black.png",id:e.imdbID,onClick:function(e){return a(e.target.id)}}),e.isFav&&c.a.createElement("img",{src:"001-star.png",id:e.imdbID,onClick:function(e){return a(e.target.id)}})),c.a.createElement("div",{className:"img"},c.a.createElement("img",{src:"".concat(e.Poster),height:"100%",width:"100%"})),c.a.createElement("div",{className:"title"},e.Title),c.a.createElement("div",{className:"description"},"Released on : ",e.Year)))}));return c.a.createElement("div",{className:"movie-card-container"},o&&l,!o&&c.a.createElement("h1",null,"Unable to fetch records, please try again"))},j=a(21),N=a.n(j),S=a(36),D=a(24);var k=function(){var e=Object(n.useContext)(h),t=(e.movieData,e.putData),a=Object(n.useState)(""),r=Object(D.a)(a,2),o=r[0],l=r[1],i=Object(n.useState)("all"),s=Object(D.a)(i,2),u=s[0],m=s[1],v="http://www.omdbapi.com/?apikey=1cae0fbe&s=",d=function(){var e=Object(S.a)(N.a.mark((function e(){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("".concat(v).concat(o)),e.prev=1,e.next=4,E.a.get("".concat(v).concat(o));case 4:a=e.sent,t(a.data,u),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"search-movies"},c.a.createElement("form",{className:"search-form",onSubmit:function(e){e.preventDefault(),console.log("".concat(v).concat(o)),d()}},c.a.createElement("input",{type:"text",placeholder:"search a movie",value:o,onChange:function(e){return l(e.target.value)}}),c.a.createElement("select",{name:"dropdown",id:"dropdown",onChange:function(e){return m(e.target.value)}},c.a.createElement("option",{value:"all"},"All"),c.a.createElement("option",{value:"movie"},"Movies"),c.a.createElement("option",{value:"series"},"Series"),c.a.createElement("option",{value:"episodes"},"Episodes")),c.a.createElement("button",null,"Search")))};var F=function(){return c.a.createElement("div",{className:"movie-container"},c.a.createElement(k,null),c.a.createElement(O,null))};var y=function(e){var t=Object(i.f)();return c.a.createElement("div",{className:"main-header"},c.a.createElement("div",{className:"header-block",onClick:function(e){return t.push("/")}},"Home"),c.a.createElement("div",{className:"header-block",onClick:function(e){return t.push("/favourites")}},"Favourites"))},I=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"main-container"},c.a.createElement(g,null,c.a.createElement(y,null),c.a.createElement(F,null)))}}]),a}(c.a.Component);var w=function(){var e=Object(n.useContext)(h).favourites,t=e.length;console.log(e);var a=e.map((function(e){return c.a.createElement("div",{className:"movie-card-layout",key:e.imdbID},c.a.createElement("div",{className:"movie-card"},c.a.createElement("div",{className:"favourite",id:e.imdbID},!e.isFav&&c.a.createElement("img",{src:"001-star-black.png",id:e.imdbID}),e.isFav&&c.a.createElement("img",{src:"001-star.png",id:e.imdbID})),c.a.createElement("div",{className:"img"},c.a.createElement("img",{src:"".concat(e.Poster),height:"100%",width:"100%"})),c.a.createElement("div",{className:"title"},e.Title),c.a.createElement("div",{className:"description"},"Released on : ",e.Year)))}));return console.log(t),c.a.createElement("div",{className:"main-container"},c.a.createElement(y,null),c.a.createElement("div",{className:"movie-container"},c.a.createElement("div",{className:"movie-card-container"},t&&a,!t&&c.a.createElement("h1",null,"No favourites"))))};var C=function(){return c.a.createElement("div",null,c.a.createElement(g,null,c.a.createElement(w,null)))};var x=function(){return c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/",exact:!0,component:I}),c.a.createElement(i.a,{path:"/favourites",exact:!0,component:C}))};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(l.a,null,c.a.createElement(x,null))),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.ec01b836.chunk.js.map